<div class="dashboard-page">
  <app-profile-card [photoUri]="profileImg" [userIsPremium]="userIsPremium" [user]="userInfo"></app-profile-card>

  <app-card [header]="'Messages'" [defaultHeaderClass]="'underline'" [bodyTemplate]="bodyTemplate"
            [footerTemplate]="footerTemplate"
            class="socket-activity-card" [ribbon]="INFORMATION_RIBBONS.get('development')">
    <!-- Body -->
    <ng-template #bodyTemplate>
      <div class="body">
        <div class="chat">
          <p *ngFor="let socketActivity of socketActivityList.reverse(); index as i"
             [class.even]="(socketActivityList.length - i) % 2 === 0">{{ '> (' + ( socketActivity.date | date: 'dd MMM HH:mm' ) + ') ' }}
            <span class="author" [class.blue-theme]="userInfo.username === socketActivity.username">
              {{socketActivity.author + ': '}}
            </span>
            {{socketActivity.message }}
          </p>
        </div>
        <div class="users">
          <p class="title"> {{ 'Active Users (' + activeUsers.size + ')' }}</p>
          <div class="users-list">
            <div *ngFor="let user of getActiveUsers(); index as i" class="user-wrapper">
              <oth-led [informationType]="userInfo.username === user.username ? 'info' : 'success'">
              </oth-led>
              <p [class.blue-theme]="userInfo.username === user.username">
                {{' ' + user.alias + ( userInfo.username === user.username ? ' (you)' : '' )}}
              </p>
            </div>
            <div *ngFor="let user of getDisconnectedUsers(); index as i" class="user-wrapper">
              <oth-led [informationType]="'error'">
              </oth-led>
              <p class="red-theme">{{' ' + user.alias}}</p>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
    <!-- Footer -->
    <ng-template #footerTemplate>
      <div class="footer">
        <form [formGroup]="form">
          <div class="input-with-icon">
            <input formControlName="message" placeholder="Message.." type="text" (keyup.enter)="onSubmit()"/>
            <i aria-hidden="true" class="fas fa-paper-plane fa-lg fa-fw" (click)="onSubmit()"></i>
          </div>
        </form>
      </div>
    </ng-template>
  </app-card>
</div>
